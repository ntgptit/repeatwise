import{u as K,c as L,r as l,j as e,s as M,a as f,T as x,S as U,F as d,d as c,I as b,e as W,B as A,C as V}from"./index-Cg5IDLAj.js";import{P as Z}from"./PageHelmet-DXTSFW23.js";import{L as q}from"./index-DRhxnB1U.js";import{C as D}from"./Container-CmgLE638.js";import{C as N}from"./Card-BV0-onuQ.js";import{A as R}from"./Alert-BfQRkqTI.js";import{V as S,a as B}from"./VisibilityOff-CS5vLWo5.js";const O=M(f)(()=>`
    height: 100%;
    display: flex;
    flex: 1;
    overflow: auto;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px 0;
`);function Y(){const p=K(),{register:E,isLoading:t,error:g,clearError:w}=L(),[r,j]=l.useState({email:"",username:"",password:"",confirmPassword:"",name:""}),[m,T]=l.useState(!1),[u,z]=l.useState(!1),[a,y]=l.useState({email:"",username:"",password:"",confirmPassword:"",name:""}),[P,v]=l.useState(""),F=s=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s),I=s=>s?s.length<3||s.length>30?!1:/^[a-z0-9_]+$/.test(s):!0,k=()=>{const s={email:"",username:"",password:"",confirmPassword:"",name:""};return r.email.trim()?F(r.email)||(s.email="Invalid email format"):s.email="Email is required",r.username&&!I(r.username)&&(s.username="Username must be 3-30 lowercase characters (letters, numbers, underscores only)"),r.password?r.password.length<8&&(s.password="Password must be at least 8 characters"):s.password="Password is required",r.confirmPassword?r.password!==r.confirmPassword&&(s.confirmPassword="Passwords do not match"):s.confirmPassword="Please confirm your password",y(s),Object.values(s).every(n=>!n)},C=async()=>{if(w(),v(""),!!k())try{const s={...r,username:r.username.trim()?r.username.trim().toLowerCase():void 0,name:r.name.trim()||void 0},n=await E(s);if(!n?.success)return;v(n.message||"Registration successful! Redirecting to login..."),j({email:"",username:"",password:"",confirmPassword:"",name:""}),setTimeout(()=>{p("/login")},2e3)}catch(s){console.error("Unexpected error during registration:",s)}},o=s=>{s.key==="Enter"&&C()},i=s=>n=>{j(h=>({...h,[s]:n.target.value})),y(h=>({...h,[s]:""}))};return e.jsxs(e.Fragment,{children:[e.jsx(Z,{title:"Register - RepeatWise"}),e.jsx(O,{children:e.jsxs(D,{maxWidth:"sm",children:[e.jsxs(f,{textAlign:"center",mb:3,children:[e.jsx(q,{}),e.jsx(x,{variant:"h2",sx:{my:2},children:"Create Account"}),e.jsx(x,{variant:"h4",color:"text.secondary",fontWeight:"normal",children:"Join RepeatWise today"})]}),e.jsx(N,{sx:{p:4},children:e.jsxs(U,{spacing:3,children:[g?e.jsx(R,{severity:"error",onClose:w,children:g}):null,P?e.jsx(R,{severity:"success",children:P}):null,e.jsx(d,{fullWidth:!0,children:e.jsx(c,{label:"Email *",type:"email",value:r.email,onChange:i("email"),onKeyPress:o,fullWidth:!0,variant:"outlined",error:!!a.email,helperText:a.email,disabled:t,autoFocus:!0})}),e.jsx(d,{fullWidth:!0,children:e.jsx(c,{label:"Username (optional)",type:"text",value:r.username,onChange:i("username"),onKeyPress:o,fullWidth:!0,variant:"outlined",error:!!a.username,helperText:a.username||"3-30 lowercase characters (letters, numbers, underscores only)",disabled:t})}),e.jsx(d,{fullWidth:!0,children:e.jsx(c,{label:"Password *",type:m?"text":"password",value:r.password,onChange:i("password"),onKeyPress:o,fullWidth:!0,variant:"outlined",error:!!a.password,helperText:a.password||"Minimum 8 characters",disabled:t,InputProps:{endAdornment:e.jsx(b,{position:"end",children:e.jsx(W,{onClick:()=>T(!m),edge:"end",children:m?e.jsx(S,{}):e.jsx(B,{})})})}})}),e.jsx(d,{fullWidth:!0,children:e.jsx(c,{label:"Confirm Password *",type:u?"text":"password",value:r.confirmPassword,onChange:i("confirmPassword"),onKeyPress:o,fullWidth:!0,variant:"outlined",error:!!a.confirmPassword,helperText:a.confirmPassword,disabled:t,InputProps:{endAdornment:e.jsx(b,{position:"end",children:e.jsx(W,{onClick:()=>z(!u),edge:"end",children:u?e.jsx(S,{}):e.jsx(B,{})})})}})}),e.jsx(d,{fullWidth:!0,children:e.jsx(c,{label:"Name (optional)",type:"text",value:r.name,onChange:i("name"),onKeyPress:o,fullWidth:!0,variant:"outlined",error:!!a.name,helperText:a.name,disabled:t})}),e.jsx(A,{variant:"contained",size:"large",fullWidth:!0,onClick:C,disabled:t,startIcon:t?e.jsx(V,{size:20}):null,children:t?"Creating Account...":"Register"}),e.jsx(f,{textAlign:"center",children:e.jsxs(x,{variant:"body2",color:"text.secondary",children:["Already have an account?"," ",e.jsx(A,{variant:"text",size:"small",onClick:()=>p("/login"),disabled:t,children:"Login"})]})})]})})]})})]})}export{Y as default};
